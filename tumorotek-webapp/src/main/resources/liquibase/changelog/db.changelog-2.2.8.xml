<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
				   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
				   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

	<changeSet id="${project.artifactId}-2.2.8-1" author="PZ" context="*">
		<tagDatabase tag="${project.parent.version}"/>
	</changeSet>
	<changeSet id="${project.artifactId}-2" author="PZ" runAlways="false" context="*">
		<comment>remplacer le type de date par datetime en deux procédures stockées</comment>
		<sqlFile encoding="utf8" path="../sql/mysql/tumorotek/export_mysql.sql" endDelimiter="&amp;&amp;" relativeToChangelogFile="true" stripComments="true"/>
	</changeSet>
	
	<changeSet id="${project.artifactId}-2.2.8-2" author="CH" runAlways="false" context="*">
        <preConditions onFail="MARK_RAN">
	        <not>
	            <indexExists indexName="OBJET_ID_IDX" tableName="OBJET_NON_CONFORME" />
	        </not>
    	</preConditions>
        <createIndex indexName="OBJET_ID_IDX" tableName="OBJET_NON_CONFORME" unique="false">  
        	<column name="OBJET_ID"/>  
    	</createIndex>
    </changeSet>
    
	<changeSet id="${project.artifactId}-2.2.8-3" author="CH" runAlways="false" context="*">
        <preConditions onFail="MARK_RAN">
	        <not>
	            <indexExists indexName="DATES_ENTITE_IDX" tableName="RETOUR" />
	        </not>
    	</preConditions>
        <createIndex indexName="DATES_ENTITE_IDX" tableName="RETOUR" unique="false">  
        	<column name="DATE_RETOUR"/>  
        	<column name="ENTITE_ID"/> 
        	<column name="DATE_SORTIE"/> 
    	</createIndex>
    </changeSet>    

</databaseChangeLog>
