<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- alimentation des tables de référence : devrait s'appeler tk-gatsbi-dml-ini-1.1.xml -->
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">
	
	 <changeSet author="tkgatsbi" id="populate-champ-entite-1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(GROUPE_CODE) FROM CHAMP_ENTITE where CHAMP_ENTITE_ID=2;
			</sqlCheck>
		</preConditions>
		<comment>Initialisation des données</comment>
		<sqlFile encoding="utf8" path="../sql/mysql/tumorotek/gatsbi-init-champ-entite.sql" relativeToChangelogFile="true" />
    </changeSet>

    <changeSet id="addContexteValue-Gatsbi-1" author="tkgatsbi"> 
    	<preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">SELECT COUNT(1) FROM CONTEXTE
                WHERE NOM = 'GATSBI'
            </sqlCheck>
        </preConditions>
        <comment>Ajout contexte nommé GATBSI</comment>
        <insert tableName="CONTEXTE">
        	<column name="CONTEXTE_ID" value="4"/>
            <column name="NOM" value="GATSBI"/>
            <column name="LIBELLE" value="Gatsbi"/>
        </insert>
    </changeSet>	
	
	
	<changeSet author="tkgatsbi" id="addRow-collaborateur-type-1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_COLLABORATEUR_TYPE WHERE CODE='COORDINATEUR';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_COLLABORATEUR_TYPE">
			<column name="CODE" value="COORDINATEUR" />
			<column name="TYPE_FAMILLE" value="PROMOTION" />
		</insert>
	</changeSet>

	<changeSet author="tkgatsbi" id="addRow-collaborateur-type-2">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_COLLABORATEUR_TYPE WHERE CODE='CHEF_DE_PROJET';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_COLLABORATEUR_TYPE">
			<column name="CODE" value="CHEF_DE_PROJET" />
			<column name="TYPE_FAMILLE" value="PROMOTION" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-collaborateur-type-3">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_COLLABORATEUR_TYPE WHERE CODE='URC';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_COLLABORATEUR_TYPE">
			<column name="CODE" value="URC" />
			<column name="TYPE_FAMILLE" value="PROMOTION" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-collaborateur-type-4">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_COLLABORATEUR_TYPE WHERE CODE='INVESTIGATEUR_PRINCIPAL';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_COLLABORATEUR_TYPE">
			<column name="CODE" value="INVESTIGATEUR_PRINCIPAL" />
			<column name="TYPE_FAMILLE" value="INVESTIGATEUR" />
		</insert>
	</changeSet>	
	<changeSet author="tkgatsbi" id="addRow-collaborateur-type-5">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_COLLABORATEUR_TYPE WHERE CODE='CO_INVESTIGATEUR';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_COLLABORATEUR_TYPE">
			<column name="CODE" value="CO_INVESTIGATEUR" />
			<column name="TYPE_FAMILLE" value="INVESTIGATEUR" />
		</insert>
	</changeSet>	
	
	<changeSet author="tkgatsbi" id="addRow-fichier-type-1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_FICHIER_TYPE WHERE CODE='PROTOCOLE';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_FICHIER_TYPE">
			<column name="CODE" value="PROTOCOLE" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-fichier-type-2">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_FICHIER_TYPE WHERE CODE='CONVENTION';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_FICHIER_TYPE">
			<column name="CODE" value="CONVENTION" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-fichier-type-3">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_FICHIER_TYPE WHERE CODE='GRILLE_SURCOUTS';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_FICHIER_TYPE">
			<column name="CODE" value="GRILLE_SURCOUTS" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-fichier-type-4">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_FICHIER_TYPE WHERE CODE='CONSENTEMENT';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_FICHIER_TYPE">
			<column name="CODE" value="CONSENTEMENT" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-fichier-type-5">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_FICHIER_TYPE WHERE CODE='MANUEL_LABO';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_FICHIER_TYPE">
			<column name="CODE" value="MANUEL_LABO" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-promotion-type-1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_PROMOTION_TYPE WHERE CODE='ACADEMIQUE';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_PROMOTION_TYPE">
			<column name="CODE" value="ACADEMIQUE" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-promotion-type-2">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_PROMOTION_TYPE WHERE CODE='INDUSTRIEL';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_PROMOTION_TYPE">
			<column name="CODE" value="INDUSTRIEL" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-intervalle-unite-1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_INTERVALLE_UNITE WHERE CODE='HEURE';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_INTERVALLE_UNITE">
			<column name="CODE" value="HEURE" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-intervalle-unite-2">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_INTERVALLE_UNITE WHERE CODE='JOUR';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_INTERVALLE_UNITE">
			<column name="CODE" value="JOUR" />
		</insert>
	</changeSet>
	<changeSet author="tkgatsbi" id="addRow-intervalle-unite-3">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM
				GATSBI_INTERVALLE_UNITE WHERE CODE='MOIS';
			</sqlCheck>
		</preConditions>
		<insert tableName="GATSBI_INTERVALLE_UNITE">
			<column name="CODE" value="MOIS" />
		</insert>
	</changeSet>
</databaseChangeLog>
